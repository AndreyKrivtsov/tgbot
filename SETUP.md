# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ –∑–∞–ø—É—Å–∫—É

–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é Telegram Bot "–ê–ª—å—Ç—Ä–æ–Ω" –≤ development –∏ production —Ä–µ–∂–∏–º–∞—Ö.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Å–∏—Å—Ç–µ–º–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Development)](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç-development)
- [Production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](#production-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–≤–Ω–µ—à–Ω–∏—Ö-—Å–µ—Ä–≤–∏—Å–æ–≤)
- [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å](#–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)

## üñ•Ô∏è –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **Node.js** v18+ –∏–ª–∏ v20+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è v20 LTS)
- **PostgreSQL** 14+ 
- **Redis** 6+
- **Docker & Docker Compose** (–¥–ª—è production)

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞:
- **RAM**: –º–∏–Ω–∏–º—É–º 2GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4GB)
- **CPU**: –º–∏–Ω–∏–º—É–º 2 —è–¥—Ä–∞
- **–î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ**: –º–∏–Ω–∏–º—É–º 10GB

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Development)

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <repository-url>
cd tgbot
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ö–æ–ø–∏—Ä—É–µ–º –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp app/env.example app/.env

# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
nano app/.env
```

–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è development:
```env
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
NODE_ENV=development
BOT_TOKEN=your_telegram_bot_token_from_botfather

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker)
DATABASE_URL=postgresql://postgres:password@localhost:5432/tgbot

# Redis (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker) 
REDIS_URL=redis://localhost:6379

# –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ)
ANTISPAM_URL=https://your-antispam-api.com/check
LLAMA_URL=https://your-llm-api.com

# –í–µ–±-—Å–µ—Ä–≤–µ—Ä
PORT=3000
ADMIN_USERNAME=your_telegram_username

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL=2
LOG_USE_FILE=true
```

### 3. –ó–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (Docker)

```bash
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–∞–ø–∫—É –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
cd infrastructure

# –ó–∞–ø—É—Å–∫–∞–µ–º PostgreSQL –∏ Redis
docker-compose up -d postgres redis

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
docker-compose ps
```

### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î

```bash
# –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ app
cd ../app

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
npm run db:generate

# –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏
npm run db:migrate
```

### 5. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# Development —Ä–µ–∂–∏–º —Å hot reload
npm run dev

# –ò–ª–∏ –æ–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫
npm start
```

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

- **–õ–æ–≥–∏**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- **Telegram**: –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É `/start`
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: http://localhost:3000/api/health

## üè≠ Production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –û–±–Ω–æ–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º—É
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker $USER

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Docker Compose
sudo apt install docker-compose-plugin

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º—Å—è –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
sudo reboot
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ environment

```bash
# –ö–æ–ø–∏—Ä—É–µ–º production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp infrastructure/env.example .env

# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Å production –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
nano .env
```

Production –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```env
NODE_ENV=production
BOT_TOKEN=your_production_bot_token

# Production –ë–î (–≤–Ω–µ—à–Ω—è—è –∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
DATABASE_URL=postgresql://user:secure_password@db:5432/tgbot_prod

# Production Redis
REDIS_URL=redis://redis:6379

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
ADMIN_USERNAME=your_secure_admin_username

# –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
LOG_LEVEL=1  # –¢–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤ production
```

### 3. –ó–∞–ø—É—Å–∫ production

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
./start-infr.prod.bash

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
./start-app.prod.bash

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker ps
docker-compose -f infrastructure/docker-compose.production.yml logs -f app
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ (systemd)

```bash
# –°–æ–∑–¥–∞–µ–º systemd service
sudo nano /etc/systemd/system/tgbot.service
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ service —Ñ–∞–π–ª–∞:
```ini
[Unit]
Description=Telegram Bot Altron
After=docker.service
Requires=docker.service

[Service]
Type=oneshot
RemainAfterExit=true
WorkingDirectory=/path/to/tgbot
ExecStart=/path/to/tgbot/start-app.prod.bash
ExecStop=/usr/bin/docker-compose -f infrastructure/docker-compose.production.yml down
User=your_user

[Install]
WantedBy=multi-user.target
```

```bash
# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º service
sudo systemctl enable tgbot.service
sudo systemctl start tgbot.service
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### Telegram Bot

1. **–°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞**:
   ```
   1. –û—Ç–∫—Ä–æ–π—Ç–µ @BotFather –≤ Telegram
   2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ /newbot
   3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
   4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∞–Ω–¥** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   ```
   /setcommands
   start - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
   help - –ü–æ–º–æ—â—å
   settings - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–∞
   ```

3. **–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):
   ```
   /setmenubutton
   –¢–µ–∫—Å—Ç: "–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å"
   URL: https://yourdomain.com/admin
   ```

### AntiSpam API

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å –∞–Ω–∞–ª–∏–∑–∞ —Å–ø–∞–º–∞:

```bash
# –ü—Ä–∏–º–µ—Ä —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–µ—Ä–≤–∏—Å–æ–º
cd infrastructure/services/antispam
docker build -t antispam-service .
docker run -d -p 8001:8000 antispam-service
```

### LLAMA API

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ LLM —Å–µ—Ä–≤–∏—Å:

```bash
cd infrastructure/services/llama
docker-compose up -d
```

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ú–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
npm run db:generate

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
npm run db:migrate

# –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
npm run db:rollback
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞
docker exec postgres pg_dump -U postgres tgbot > backup_$(date +%Y%m%d).sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
docker exec -i postgres psql -U postgres tgbot < backup.sql
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ë–î

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
SELECT count(*) FROM pg_stat_activity;

-- –†–∞–∑–º–µ—Ä –ë–î
SELECT pg_size_pretty(pg_database_size('tgbot'));

-- –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
SELECT query, state, query_start 
FROM pg_stat_activity 
WHERE state = 'active';
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
npm test

# –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
npm run test:coverage

# –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã
npm run test:unit

# –¢–æ–ª—å–∫–æ integration —Ç–µ—Å—Ç—ã
npm run test:integration

# –¢–µ—Å—Ç—ã –≤ watch —Ä–µ–∂–∏–º–µ
npm run test:watch
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î
createdb tgbot_test

# –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤
export DATABASE_URL=postgresql://postgres:password@localhost:5432/tgbot_test
```

## üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### Development

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Fastify (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
npm install fastify @fastify/cors @fastify/static

# –ó–∞–ø—É—Å–∫ —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
npm run dev
```

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω: http://localhost:3000/admin

### Production

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx reverse proxy
sudo nano /etc/nginx/sites-available/tgbot
```

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx:
```nginx
server {
    listen 80;
    server_name yourdomain.com;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–≥–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f app/logs/bot.log

# Docker logs
docker logs -f tgbot_app

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs -f postgres
```

### Health Check

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
curl http://localhost:3000/api/health

# –û—Ç–≤–µ—Ç:
{
  "status": "ok",
  "services": {
    "database": true,
    "redis": true,
    "telegramBot": true,
    "aiChat": true
  }
}
```

### –ú–µ—Ç—Ä–∏–∫–∏

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
curl http://localhost:3000/api/stats

# Redis —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
docker exec redis redis-cli info stats
```

## üõ°Ô∏è –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è –∏ –∫–∞–ø—á–∞

–ù–∞—á–∏–Ω–∞—è —Å —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏, –≤—Å—è –º–æ–¥–µ—Ä–∞—Ü–∏—è –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ –µ–¥–∏–Ω—ã–π –∞–¥–∞–ø—Ç–µ—Ä, –∞ –∫–∞–ø—á–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–∏—Å–µ.

- –ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –º–æ–¥–µ—Ä–∞—Ü–∏—è:
  - `app/src/services/TelegramBot/adapters/ModerationAdapter.ts` ‚Äî –µ–¥–∏–Ω—ã–π —Å–ª–æ–π –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (restrict/unrestrict/kick/ban/unban/delete/send).
  - –ó–∞–º–µ–Ω—è–µ—Ç –ø—Ä–µ–∂–Ω–∏–π `UserRestrictions` (—É–¥–∞–ª—ë–Ω).

- –ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫–∞–ø—á–∞:
  - –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è: `app/src/services/CaptchaService/index.ts` (–º–µ—Ç–æ–¥—ã `startChallenge`, `submitAnswer`, –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–∞).
  - Telegram-–∞–¥–∞–ø—Ç–µ—Ä: `app/src/services/TelegramBot/adapters/CaptchaTelegramAdapter.ts`.

- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –∏ —Ç–∞–π–º–∞—É—Ç–æ–≤ (runtime):
  - –£–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `SettingsManager` —É –±–æ—Ç–∞ (—Å–º. `TelegramBotService`):
    - `temporaryBanDurationSec` ‚Äî –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –±–∞–Ω–∞.
    - `autoUnbanDelayMs` ‚Äî –∑–∞–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ—Ä–∞–∑–±–∞–Ω–∞/–∫–∏–∫–∞.
    - `captchaTimeoutMs`, `captchaCheckIntervalMs` ‚Äî —Ç–∞–π–º–∞—É—Ç –∏ –ø–µ—Ä–∏–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–ø—á–∏.
    - `errorMessageDeleteTimeoutMs` ‚Äî –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
    - `maxMessagesForSpamCheck` ‚Äî –∞–Ω—Ç–∏—Å–ø–∞–º –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–µ—Ä–≤—ã–µ N —Å–æ–æ–±—â–µ–Ω–∏–π.
  - –î–ª—è –±—ã—Å—Ç—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ dev: –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ `Application.registerWebServices()` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `TelegramBotService` (–ø–∞—Ä–∞–º–µ—Ç—Ä `botSettings`).

- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –º–æ–¥–µ—Ä–∞—Ü–∏–∏/–∫–∞–ø—á–∏:
  - `REDIS_URL` ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–æ–≤/–∫–µ—à–µ–π.
  - `ANTISPAM_URL` ‚Äî –≤–Ω–µ—à–Ω–∏–π –∞–Ω—Ç–∏—Å–ø–∞–º API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∞–Ω—Ç–∏—Å–ø–∞–º).

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ª–∏–±–æ –¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π API/–∫–æ–º–∞–Ω–¥—É –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è `SettingsManager` –Ω–∞ –ª–µ—Ç—É.

## üîç –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î**:
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
   docker exec postgres pg_isready -U postgres
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –ë–î
   docker logs postgres
   ```

2. **Redis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω**:
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ Redis
   docker exec redis redis-cli ping
   # –î–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å: PONG
   ```

3. **Telegram API –æ—à–∏–±–∫–∏**:
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
   curl https://api.telegram.org/bot<YOUR_TOKEN>/getMe
   ```

4. **–ù–µ—Ç –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç AI**:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ API –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω —á–µ—Ä–µ–∑ `/addAltronKey` –∫–æ–º–∞–Ω–¥—É
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–Ω—Ç–∏—Å–ø–∞–º —Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ AI –≤–∫–ª—é—á–µ–Ω –≤ —á–∞—Ç–µ (`/ultron 1`)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ AIChatService

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker ps

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
netstat -tlpn | grep :3000

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
df -h

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏
free -h
```

### –°–±—Ä–æ—Å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫

```bash
# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–û–°–¢–û–†–û–ñ–ù–û! –£–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ)
docker-compose down -v
docker system prune -a

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose build --no-cache

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker-compose restart app
```

## üìû –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** - –æ–Ω–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–∞—Ö
2. **–£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ .env** - –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω—ã  
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤** - –∞–Ω—Ç–∏—Å–ø–∞–º, LLAMA API
4. **–°–æ–∑–¥–∞–π—Ç–µ issue** —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã –∏ –ª–æ–≥–∞–º–∏

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Telegram Bot API](https://core.telegram.org/bots/api)
- [GramIO –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://gramio.dev)
- [Drizzle ORM](https://orm.drizzle.team)
- [Docker Compose](https://docs.docker.com/compose/) 