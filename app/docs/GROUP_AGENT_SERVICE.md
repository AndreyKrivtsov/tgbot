# ü§ñ GroupAgentService - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ

## üìã –û–±–∑–æ—Ä

**GroupAgentService** - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π AI-–∞–≥–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–∞—Ç–∞–º–∏, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∏ —É—á–∞—Å—Ç–∏—è –≤ –¥–∏–∞–ª–æ–≥–µ. –°–µ—Ä–≤–∏—Å –∑–∞–º–µ–Ω—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ `AIChatService` –∏ `AIModerationService`, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –±–∞—Ç—á–µ–≤–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ AI.

**–°—Ç–∞—Ç—É—Å:** MVP (Minimum Viable Product)  
**–í–µ—Ä—Å–∏—è:** 1.0.0-mvp

---

## üéØ –¶–µ–ª–∏ –∏ –∑–∞–¥–∞—á–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏

1. **–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è AI-–æ–±—Ä–∞–±–æ—Ç–∫–∏** - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∏ —á–∞—Ç–∞ –≤ –µ–¥–∏–Ω—ã–π —Å–µ—Ä–≤–∏—Å
2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è API-–∑–∞–ø—Ä–æ—Å–æ–≤** - –±–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤ (~10k –∑–∞–ø—Ä–æ—Å–æ–≤/—Å—É—Ç–∫–∏ –Ω–∞ –∫–ª—é—á)
3. **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∏–ª–∏ –æ—Ç–≤–µ—Ç–∞
4. **–ò–≥—Ä–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è** - –æ—Ç–≤–µ—Ç—ã –≤ —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —á–∞—Ç–∞

### –ë–∏–∑–Ω–µ—Å-–∑–∞–¥–∞—á–∏

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π (–ø–æ–∏—Å–∫ –Ω–∞—Ä—É—à–µ–Ω–∏–π, —Å–ø–∞–º–∞, –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏–π)
- –£—á–∞—Å—Ç–∏–µ –≤ –¥–∏–∞–ª–æ–≥–µ –∫–∞–∫ –∞–∫—Ç–∏–≤–Ω—ã–π —É—á–∞—Å—Ç–Ω–∏–∫ —á–∞—Ç–∞
- –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∏–ª–∏ –æ—Ç–≤–µ—Ç–∞ –≤ –∏–≥—Ä–æ–≤–æ–π —Ñ–æ—Ä–º–µ
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API-–∫–≤–æ—Ç —á–µ—Ä–µ–∑ –±–∞—Ç—á–µ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö AI-—Å–µ—Ä–≤–∏—Å–æ–≤**
   - –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –æ—Ç `AIChatService` –∏ `AIModerationService`
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ –ø–µ—Ä–µ—Ö–æ–¥–Ω—ã–π –ø–µ—Ä–∏–æ–¥
   - –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

2. **–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Clean Architecture)**
   - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏: Domain, Application, Infrastructure
   - Dependency Inversion: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –≤–Ω—É—Ç—Ä—å
   - –ü–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –æ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

3. **Event-Driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `EventBus`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `TelegramActionsAdapter` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π
   - –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

4. **SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã**
   - Single Responsibility: –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–µ–µ—Ç –æ–¥–Ω—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
   - Open/Closed: —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏
   - Dependency Inversion: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Å–ª–æ–∏

```
GroupAgentService/
‚îú‚îÄ‚îÄ domain/              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (—á–∏—Å—Ç–∞—è, –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
‚îÇ   ‚îú‚îÄ‚îÄ MessageClassifier.ts    # –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ ModerationDecision.ts   # –†–µ—à–µ–Ω–∏—è –æ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ ResponseDecision.ts     # –†–µ—à–µ–Ω–∏—è –æ–± –æ—Ç–≤–µ—Ç–∞—Ö
‚îú‚îÄ‚îÄ application/         # Use cases (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ BatchProcessor.ts       # –ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ MessageBuffer.ts        # –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ DecisionOrchestrator.ts # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏–π
‚îú‚îÄ‚îÄ infrastructure/      # –í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ AIProviderAdapter.ts    # –ê–¥–∞–ø—Ç–µ—Ä AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (Gemini)
‚îÇ   ‚îú‚îÄ‚îÄ ChatRepositoryAdapter.ts # –ê–¥–∞–ø—Ç–µ—Ä —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ EventBusAdapter.ts     # –ê–¥–∞–ø—Ç–µ—Ä EventBus
‚îî‚îÄ‚îÄ index.ts            # –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å (IService)
```

---

## üîß –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### FR-1: –ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–æ–±—â–µ–Ω–∏—è –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ –±—É—Ñ–µ—Ä–∞—Ö –ø–æ —á–∞—Ç–∞–º –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ `chatId`
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –±–∞—Ç—á–µ–π (–∏–Ω—Ç–µ—Ä–≤–∞–ª –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π)
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ (–ª–∏–º–∏—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π)
- –ï—Å–ª–∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ—Ç - –±–∞—Ç—á –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (MVP):**
- –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏: 10 —Å–µ–∫—É–Ω–¥
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞: 50 —Å–æ–æ–±—â–µ–Ω–∏–π
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –±—É—Ñ–µ—Ä–µ

### FR-2: –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ AI

**–û–ø–∏—Å–∞–Ω–∏–µ:** AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –±–∞—Ç—á —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. –í –æ–¥–Ω–æ–º –æ—Ç–≤–µ—Ç–µ AI –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

**–§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è AI:**

–í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –µ–¥–∏–Ω–æ–º—É —à–∞–±–ª–æ–Ω—É –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ AI:

```
[ID:messageId][UID:userId][ADMIN?][time][@username][firstName]: [message]
```

**–û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π:**
- `ID:messageId` - **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π** ID —Å–æ–æ–±—â–µ–Ω–∏—è (–Ω—É–∂–µ–Ω –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π –º–æ–¥–µ—Ä–∞—Ü–∏–∏)
- `UID:userId` - **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π** ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–∞–≤—Ç–æ—Ä–∞
- `ADMIN?` - —Ç–µ–≥ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –µ—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (`[ADMIN]`)
- `time` - –≤—Ä–µ–º—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ `YYYY-MM-DD HH:mm` (UTC)
- `@username` - —é–∑–µ—Ä–Ω–µ–π–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `firstName` - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `message` - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä—ã:**
```
[ID:12345][UID:777][2025-03-19 13:47][@user1][–ò–≤–∞–Ω]: –ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º!
[ID:12346][UID:778][2025-03-19 13:48][@user2][–ü–µ—Ç—Ä]: –≠—Ç–æ —Ä–µ–∫–ª–∞–º–∞!
[ID:12347][UID:1][ADMIN][2025-03-19 13:49][@admin][Admin]: –ó–∞–º—É—Ç—å @user2
```

**–í–∞–∂–Ω–æ:** ID —Å–æ–æ–±—â–µ–Ω–∏—è –≤—Å–µ–≥–¥–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –Ω–∞—á–∞–ª–µ, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (—É–¥–∞–ª–µ–Ω–∏–µ, mute, kick, ban).
- **–î–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è:** —Ç–µ–∫—Å—Ç –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è –¥–æ 300 —Å–∏–º–≤–æ–ª–æ–≤ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ AI. –ü—Ä–∏ –æ–±—Ä–µ–∑–∫–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è `‚Ä¶`
- **–õ–∏–º–∏—Ç –∏—Å—Ç–æ—Ä–∏–∏:** –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –±–∞—Ç—á –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–µ –±–æ–ª–µ–µ 50 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π; –ø—Ä–∏ –¥–ª–∏–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –ª–∏–º–∏—Ç –º–æ–∂–µ—Ç —É–º–µ–Ω—å—à–∞—Ç—å—Å—è, —á—Ç–æ–±—ã –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –æ–±—â–∏–π –æ–±—ä—ë–º —Ç–æ–∫–µ–Ω–æ–≤

**–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç:**
- **–¢–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è:** –æ–±—ã—á–Ω–æ–µ, –Ω–∞—Ä—É—à–µ–Ω–∏–µ, –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –±–æ—Ç—É
- **–¢–∏–ø –Ω–∞—Ä—É—à–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å):** —Å—Ç—Ä–æ–≥–æ–µ (—Ä–µ–∫–ª–∞–º–∞, –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ) –∏–ª–∏ –º—è–≥–∫–æ–µ (–æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è, –º–∞—Ç, —Å–ø–∞–º)
- **–ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞:** —Ç—Ä–µ–±—É–µ—Ç—Å—è/–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è (—Ç—Ä–∏–≥–≥–µ—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ò–∑—Ä–µ–¥–∫–∞ –±–æ—Ç –º–æ–∂–µ—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –æ–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –Ω–æ —Ç—Ä–∏–≥–≥–µ—Ä –æ—Ç–≤–µ—Ç–∞ –∑–∞–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –¥–ª—è AI.

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ AI:**
```typescript
type ClassificationType = "normal" | "violation" | "bot_mention"
type ModerationActionKind = "none" | "warn" | "delete" | "mute" | "unmute" | "kick" | "ban" | "unban"

interface ClassificationResult {
  messageId: number
  classification: {
    type: ClassificationType
    requiresResponse: boolean
  }
  moderationAction?: ModerationActionKind
  responseText?: string
  targetUserId?: number
  targetMessageId?: number
  durationMinutes?: number
}

// AI –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –º–∞—Å—Å–∏–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
interface BatchClassificationResult {
  results: ClassificationResult[]
}
```

**–í–∞–∂–Ω–æ:** –í—Å–µ —Ç–µ–∫—Å—Ç—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π, –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–π –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∏ –æ—Ç–≤–µ—Ç–æ–≤ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è AI –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. **–ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤** –≤ –∫–æ–¥–µ —Å–µ—Ä–≤–∏—Å–∞. AI —Å–∞–º —Ñ–æ—Ä–º—É–ª–∏—Ä—É–µ—Ç –ø—Ä–∏—á–∏–Ω—É –Ω–∞—Ä—É—à–µ–Ω–∏—è –∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å–∞–Ω–∫—Ü–∏–π –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º –∞–≥–µ–Ω—Ç–∞ –∏–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.

### FR-3: –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π –æ –º–æ–¥–µ—Ä–∞—Ü–∏–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–∞ –æ—Å–Ω–æ–≤–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è —Ä–µ—à–µ–Ω–∏–µ –æ –¥–µ–π—Å—Ç–≤–∏—è—Ö –º–æ–¥–µ—Ä–∞—Ü–∏–∏.

**–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (MVP):**
- –°–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è, –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–µ AI, —á–µ—Ä–µ–∑ ModerationPolicy –±–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å—á–µ—Ç—á–∏–∫–æ–≤/—ç—Å–∫–∞–ª–∞—Ü–∏–π.
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–Ω–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å kick/ban¬ª) –∑–∞–¥–∞—é—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –¥–ª—è AI.
- –¢–µ–∫—Å—Ç—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π/–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–π –±–µ—Ä—É—Ç—Å—è –∏–∑ `responseText`.

### FR-4: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –≤ –∏–≥—Ä–æ–≤–æ–π —Ñ–æ—Ä–º–µ

**–û–ø–∏—Å–∞–Ω–∏–µ:** AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ. –¢—Ä–∏–≥–≥–µ—Ä –æ—Ç–≤–µ—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –¥–ª—è AI.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –û—Ç–≤–µ—Ç—ã —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `requiresResponse = true` (—Ç—Ä–∏–≥–≥–µ—Ä —á–µ—Ä–µ–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é)
- –°—Ç–∏–ª—å –æ—Ç–≤–µ—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º –∞–≥–µ–Ω—Ç–∞ –∏–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- –£—á–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ (—Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–∑ —Ñ–∞–π–ª–∞ `defaultInstructions.ts`
- –†–∞–∑–ª–∏—á–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ –∏—Å—Ç–æ—Ä–∏—é –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–º –ø—Ä–æ–º–ø—Ç–µ
- **–í—Å–µ —Ç–µ–∫—Å—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è AI**, –∞ –Ω–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã –≤ –∫–æ–¥–µ

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞: 2000 —Å–∏–º–≤–æ–ª–æ–≤
- –ù–µ –±–æ–ª–µ–µ 1 –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –±–∞—Ç—á (–¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ API-–∑–∞–ø—Ä–æ—Å–æ–≤)
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç–≤–µ—Ç–æ–≤: bot_mention > normal (–µ—Å–ª–∏ —Ç—Ä–∏–≥–≥–µ—Ä —Å—Ä–∞–±–æ—Ç–∞–ª)

### FR-5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å EventBus

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–µ—Ä–≤–∏—Å –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è –∏ —ç–º–∏—Ç–∏—Ç —Å–æ–±—ã—Ç–∏—è —Å actions.

**–ü–æ–¥–ø–∏—Å–∫–∏:**
- `MESSAGE_GROUP` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –≥—Ä—É–ø–ø (–≤–∫–ª—é—á–∞—è –æ–±—Ä–∞—â–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤)

**–≠–º–∏—Å—Å–∏—è —Å–æ–±—ã—Ç–∏–π:**
- `GROUP_AGENT_MODERATION_ACTION` - –¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- `GROUP_AGENT_RESPONSE` - –≥–æ—Ç–æ–≤ –æ—Ç–≤–µ—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏

**–§–æ—Ä–º–∞—Ç —Å–æ–±—ã—Ç–∏–π:**
```typescript
interface ModerationActionEvent {
  chatId: number
  actions: Array<{
    type: "deleteMessage" | "warn" | "mute" | "kick" | "ban"
    messageId?: number
    userId?: number
    duration?: number
    reason: string  // –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ AI (–Ω–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–æ)
  }>
}

interface AgentResponseEvent {
  chatId: number
  actions: Array<{
    type: "sendMessage"
    text: string  // –¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π AI (–Ω–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω)
    replyToMessageId?: number
  }>
}
```

**–í–∞–∂–Ω–æ:** –ü–æ–ª–µ `reason` –≤ `ModerationActionEvent` –∏ –ø–æ–ª–µ `text` –≤ `AgentResponseEvent` —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–µ–∫—Å—Ç—ã, **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ AI**. –í –∫–æ–¥–µ —Å–µ—Ä–≤–∏—Å–∞ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ –∏–ª–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç —Å —Ç–µ–∫—Å—Ç–∞–º–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.

### FR-6: –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è AI

**–û–ø–∏—Å–∞–Ω–∏–µ:** AI —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –≤ –∫–∞–∂–¥–æ–º —á–∞—Ç–µ.

**–•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (MVP):**
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `defaultInstructions.ts`
- –§–æ—Ä–º–∞—Ç: TypeScript –æ–±—ä–µ–∫—Ç —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- –ù–∞ MVP —á—Ç–µ–Ω–∏–µ –∏–∑ –ë–î/Redis –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –±—É–¥—É—â–µ–º)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:**
```typescript
interface AgentInstructions {
  // –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è
  agent: {
    name?: string                  // –ò–º—è –∞–≥–µ–Ω—Ç–∞
    personality?: string           // –•–∞—Ä–∞–∫—Ç–µ—Ä –∞–≥–µ–Ω—Ç–∞ (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç–∏–ª—å –æ—Ç–≤–µ—Ç–æ–≤)
    role?: string                  // –†–æ–ª—å –∞–≥–µ–Ω—Ç–∞
  }
  
  // –ü—Ä–∞–≤–∏–ª–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
  moderation: {
    strictness?: "soft" | "medium" | "strict"  // –°—Ç—Ä–æ–≥–æ—Å—Ç—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏
    violationRules?: {
      [category: string]: {
        firstOffense: string
        secondOffense: string
        // ... –≥—Ä–∞–¥–∞—Ü–∏—è –Ω–∞–∫–∞–∑–∞–Ω–∏–π
      }
    }
  }
  
  // –ü—Ä–∞–≤–∏–ª–∞ –æ—Ç–≤–µ—Ç–æ–≤
  responses: {
    triggers: string[]             // –ö–æ–≥–¥–∞ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –æ–±—ã—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    priorities: string[]           // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ç–∏–ø–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
  }
  
  // –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
  customRules?: string              // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
}
```

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (MVP):**
- –ù–∞ MVP –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞–¥–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `defaultInstructions.ts`
- –í –±—É–¥—É—â–µ–º: –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç —á–µ—Ä–µ–∑ UI (React, Telegram Web App)
- –í –±—É–¥—É—â–µ–º: UI —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ –ë–î/Redis, —Å–µ—Ä–≤–∏—Å —á–∏—Ç–∞–µ—Ç –∏–∑ –ë–î/Redis

### FR-7: –û–±—Ä–∞—â–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∫ AI

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –±–æ—Ç—É –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ —Å –ø—Ä–æ—Å—å–±–∞–º–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å–∞–Ω–∫—Ü–∏–∏ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥—Ä—É–≥–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –†–∞–∑–ª–∏—á–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –æ—Ç –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ –∫–æ–¥ (–Ω–µ —á–µ—Ä–µ–∑ AI)
- –ü–æ–º–µ—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º —Ñ–ª–∞–≥–æ–º
- AI –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ—Å—å–±—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
- **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤:** –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —É–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:
  - Username (`@username`) ‚Üí –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ `user_id` —á–µ—Ä–µ–∑ `UserManager` –∏–ª–∏ Telegram API
  - –ü–æ–ª–Ω–æ–µ –∏–º—è (`–ò–º—è –§–∞–º–∏–ª–∏—è`) ‚Üí –ø–æ–∏—Å–∫ –≤ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–ª–∏ Telegram API
  - User ID (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω —è–≤–Ω–æ)
  - Reply-to-message ‚Üí `message.reply_to_message.from.id` –∏ `message.reply_to_message.message_id`
- –ë–æ—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ—à–µ–Ω–∏—è AI

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —á–µ—Ä–µ–∑ `ChatRepository.isAdmin(chatId, userId)`
- –ü–æ–º–µ—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Ñ–ª–∞–≥–æ–º `isAdmin: true` –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ AI
- AI –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤:**
1. Reply-to-message (–µ—Å–ª–∏ –µ—Å—Ç—å)
2. Username –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å `@username`)
3. –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –≤ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
4. –ó–∞–ø—Ä–æ—Å –∫ Telegram API (–µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤ –∫–µ—à–µ)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ö–æ–º–∞–Ω–¥—ã –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–µ—Ä–≤–∏—Å–æ–º –∫–æ–º–∞–Ω–¥. GroupAgentService —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –æ–±—ã—á–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏ –ø—Ä–æ—Å—å–±–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ.

---

## üîå –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### TR-1: AI –ü—Ä–æ–≤–∞–π–¥–µ—Ä

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Google Gemini API
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π API-–∫–ª—é—á –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞—Ç–∞ (–∏–∑ `chat_configs.gemini_api_key`)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–∞—Ç—á–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API (retry, fallback)

**–õ–∏–º–∏—Ç—ã:**
- ~10,000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å—É—Ç–∫–∏ –Ω–∞ –∫–∞–∂–¥—ã–π API-–∫–ª—é—á
- –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞: 30 —Å–µ–∫—É–Ω–¥
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ retry: 2

### TR-2: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è AI

**–§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π:**

–í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ AI —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ —à–∞–±–ª–æ–Ω—É `[ID:messageId][UID:userId][ADMIN?][time][@username][firstName]: [message]`.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
function formatMessageForAI(message: {
  id: number
  text: string
  userId: number
  username?: string
  firstName?: string
  timestamp: number
  isAdmin?: boolean
}): string {
  const date = new Date(message.timestamp)
  const time = `${date.getUTCFullYear()}-${pad2(date.getUTCMonth() + 1)}-${pad2(date.getUTCDate())} ${pad2(date.getUTCHours())}:${pad2(date.getUTCMinutes())}`
  
  const parts: string[] = []
  parts.push(`[ID:${message.id}]`)       // ID –≤—Å–µ–≥–¥–∞ –≤ –Ω–∞—á–∞–ª–µ
  parts.push(`[UID:${message.userId}]`)  // UID –∞–≤—Ç–æ—Ä–∞
  if (message.isAdmin) parts.push("[ADMIN]") // –º–∞—Ä–∫–µ—Ä –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
  parts.push(`[${time}]`)
  if (message.username) parts.push(`[@${message.username}]`)
  if (message.firstName) parts.push(`[${message.firstName}]`)
  
  return `${parts.join("")}: ${truncateTo300(message.text)}`
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ID —Å–æ–æ–±—â–µ–Ω–∏—è **–≤—Å–µ–≥–¥–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç** –≤ –Ω–∞—á–∞–ª–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏)
- –í—Ä–µ–º—è –≤—Å–µ–≥–¥–∞ –≤ UTC
- Username –∏ name –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã (–ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è, –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç)
- –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ñ–ª–∞–≥ `[ADMIN]` –ø–æ—Å–ª–µ ID
- –°–æ–æ–±—â–µ–Ω–∏—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—é—Ç—Å—è —Ç–∞–∫ –∂–µ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- –ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ AI —Ç–µ–∫—Å—Ç –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è –¥–æ 300 —Å–∏–º–≤–æ–ª–æ–≤ —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º `‚Ä¶` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –ò—Å—Ç–æ—Ä–∏—è –∏ —Ç–µ–∫—É—â–∏–π –±–∞—Ç—á –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ 50 (¬±) —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏–ª–∏ –º–µ–Ω—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º, –µ—Å–ª–∏ —Å—É–º–º–∞—Ä–Ω—ã–π –æ–±—ä—ë–º –ø—Ä–µ–≤—ã—à–∞–µ—Ç —Ü–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —Ç–æ–∫–µ–Ω–∞–º

### TR-3: –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ (–∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è AI):**
- Redis: `group_agent:history:{chatId}` - –∏—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –æ—Ç–≤–µ—Ç–æ–≤ –±–æ—Ç–∞
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞: –º–∞—Å—Å–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–π —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ `timestamp`
- TTL: –Ω–µ –∑–∞–¥–∞–µ—Ç—Å—è (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ —Ä–∞–∑–º–µ—Ä—É)
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 100 —Å–æ–æ–±—â–µ–Ω–∏–π (—Ö—Ä–∞–Ω–∏—Ç—Å—è —Å—Ä–µ–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π)
- –ò—Å—Ç–æ—Ä–∏—è –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è AI, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ù–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ) –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –±–∞—Ç—á
- –°—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ª–∏–º–∏—Ç –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–æ–æ–±—â–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50, –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø—Ä–∏ –¥–ª–∏–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö) –∏ –æ–±—Ä–µ–∑–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –¥–æ 300 —Å–∏–º–≤–æ–ª–æ–≤

**–ë—É—Ñ–µ—Ä—ã –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:**
- In-memory —Ö—Ä–∞–Ω–µ–Ω–∏–µ (Map<chatId, BufferedMessage[]>)
- –¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ, –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –≤ Redis –¥–ª—è recovery –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
- TTL: 1 —á–∞—Å (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –±—É—Ñ–µ—Ä–æ–≤)
- –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ `processed: true` –∏ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏—é

**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∞–≥–µ–Ω—Ç–∞ (MVP):**
- –§–∞–π–ª: `defaultInstructions.ts` - –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AI
- –ù–∞ MVP —á—Ç–µ–Ω–∏–µ –∏–∑ –ë–î/Redis –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- –í –±—É–¥—É—â–µ–º: –ë–î `chat_configs.group_agent_instructions` (JSONB) + Redis –∫–µ—à

### TR-4: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ constants.ts:**
```typescript
export const GROUP_AGENT_CONFIG = {
  // –ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
  BATCH_INTERVAL_MS: 10_000,         // 10 —Å–µ–∫—É–Ω–¥
  MAX_BATCH_SIZE: 50,                 // –ú–∞–∫—Å–∏–º—É–º —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –±–∞—Ç—á–µ
  
  // AI –∑–∞–ø—Ä–æ—Å—ã
  AI_REQUEST_TIMEOUT_MS: 10_000,     // 10 —Å–µ–∫—É–Ω–¥
  AI_MAX_RETRIES: 2,                  // –ú–∞–∫—Å–∏–º—É–º –ø–æ–≤—Ç–æ—Ä–æ–≤
  AI_MAX_RESPONSE_LENGTH: 2_000,     // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞
  
  // –ò—Å—Ç–æ—Ä–∏—è –∏ –±—É—Ñ–µ—Ä—ã
  HISTORY_MAX_MESSAGES: 100,          // –ú–∞–∫—Å–∏–º—É–º —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏
  BUFFER_TTL_SECONDS: 3_600,          // 1 —á–∞—Å (–±—É—Ñ–µ—Ä –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)
} as const
```

### TR-5: Lifecycle —Å–µ—Ä–≤–∏—Å–∞

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è IService:**
```typescript
interface IService {
  name: string
  initialize(): Promise<void>
  start(): Promise<void>
  stop(): Promise<void>
  dispose(): Promise<void>
  isHealthy(): boolean
}
```

**–§–∞–∑—ã:**
1. **initialize()** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ EventBus, –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. **start()** - –∑–∞–ø—É—Å–∫ –±–∞—Ç—á–µ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–æ–≤ –∏–∑ Redis
3. **stop()** - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–æ–≤ –≤ Redis
4. **dispose()** - –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

---

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å EventBus

**–ü–æ–¥–ø–∏—Å–∫–∞:**
```typescript
eventBus.onMessageGroupOrdered(async (event) => {
  await groupAgentService.handleMessage(event)
  return false
}, 5)
```

**–≠–º–∏—Å—Å–∏—è:**
```typescript
// –ú–æ–¥–µ—Ä–∞—Ü–∏—è
await eventBus.emitGroupAgentModerationAction({
  chatId,
  actions: [...]
})

// –û—Ç–≤–µ—Ç
await eventBus.emitGroupAgentResponse({
  chatId,
  actions: [{ type: "sendMessage", text: "..." }]
})
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TelegramActionsAdapter

**–î–µ–π—Å—Ç–≤–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ TelegramActionsAdapter:**
- `deleteMessage` - —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `sendMessage` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞
- `warn` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (—á–µ—Ä–µ–∑ sendMessage)
- `mute` - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- `kick` - –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–∑ –≥—Ä—É–ø–ø—ã
- `ban` - –±–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ChatRepository

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ü–æ–ª—É—á–µ–Ω–∏–µ API-–∫–ª—é—á–∞: `chatRepository.getChatConfig(chatId)`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∞–≥–µ–Ω—Ç–∞ –¥–ª—è —á–∞—Ç–∞: `chat_configs.groupAgentEnabled`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞: `chatRepository.isAdmin(chatId, userId)`
- –ù–∞ MVP –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–∞ `defaultInstructions.ts` (–Ω–µ –∏–∑ –ë–î)

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RedisService

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞: `redis.set("group_agent:history:{chatId}", JSON.stringify(history))`
- –ë—É—Ñ–µ—Ä—ã –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π: `redis.setex("group_agent:buffer:{chatId}", ttl, JSON.stringify(buffer))`

---

## üìä –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ª–∏–º–∏—Ç—ã (MVP)

### –õ–∏–º–∏—Ç—ã API

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| –ó–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å—É—Ç–∫–∏ | ~10,000 | –ù–∞ –∫–∞–∂–¥—ã–π API-–∫–ª—é—á |
| –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ | 50 —Å–æ–æ–±—â–µ–Ω–∏–π | –ú–∞–∫—Å–∏–º—É–º –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ |
| –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞ | 10 —Å–µ–∫—É–Ω–¥ | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è |
| Retry –ø–æ–ø—ã—Ç–∫–∏ | 2 | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–µ |

### –õ–∏–º–∏—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| –ò–Ω—Ç–µ—Ä–≤–∞–ª –±–∞—Ç—á–µ–π | 10 —Å–µ–∫—É–Ω–¥ | –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ |
| –û—Ç–ø—Ä–∞–≤–∫–∞ –±–∞—Ç—á–∞ | –¢–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π | –ï—Å–ª–∏ –Ω–æ–≤—ã—Ö –Ω–µ—Ç - –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º |
| –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è | 100 —Å–æ–æ–±—â–µ–Ω–∏–π | –î–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ AI |
| –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞ | 2000 —Å–∏–º–≤–æ–ª–æ–≤ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ AI |

### –õ–∏–º–∏—Ç—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| TTL –∏—Å—Ç–æ—Ä–∏–∏ | 24 —á–∞—Å–∞ | –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ |
| TTL –±—É—Ñ–µ—Ä–∞ | 1 —á–∞—Å | –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö |

---

## üéØ MVP Scope

### –í–∫–ª—é—á–∞–µ—Ç—Å—è –≤ MVP

‚úÖ –ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (–∏–Ω—Ç–µ—Ä–≤–∞–ª 10 —Å–µ–∫)  
‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ AI (Gemini) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤  
‚úÖ –ë–∞–∑–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (delete, warn, mute)  
‚úÖ –†–∞–∑–Ω—ã–µ –≥—Ä–∞–¥–∞—Ü–∏–∏ –Ω–∞–∫–∞–∑–∞–Ω–∏–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –Ω–∞—Ä—É—à–µ–Ω–∏–π  
‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –≤ –∏–≥—Ä–æ–≤–æ–π —Ñ–æ—Ä–º–µ (—Ç—Ä–∏–≥–≥–µ—Ä —á–µ—Ä–µ–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é)  
‚úÖ –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è AI (—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª–µ `defaultInstructions.ts`)  
‚úÖ –†–∞–∑–ª–∏—á–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏  
‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å EventBus –∏ TelegramActionsAdapter  
‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏ –±—É—Ñ–µ—Ä–æ–≤ –≤ Redis  
‚úÖ –†–∞–∑–ª–∏—á–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–¥ (–Ω–µ —á–µ—Ä–µ–∑ AI)  
‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—Ä–∞—â–µ–Ω–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∫ AI –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ  

### –ù–ï –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ MVP (–±—É–¥—É—â–∏–µ –≤–µ—Ä—Å–∏–∏)

‚ùå UI –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (React, Telegram Web App) - –Ω–µ–∑–∞–≤–∏—Å–∏–º –æ—Ç —Å–µ—Ä–≤–∏—Å–∞  
‚ùå –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ throttling (token bucket)  
‚ùå –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –±–∞—Ç—á–µ–π –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏  
‚ùå –û–±—É—á–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏  
‚ùå –ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≤–∏–¥–µ–æ)  
‚ùå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ API  
‚ùå –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏  
‚ùå A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –º–æ–¥–µ—Ä–∞—Ü–∏–∏  

---

## üöÄ –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (MVP)

### –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–µ—Ä–≤–∏—Å–∞ (domain/application/infrastructure)
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è IService –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å EventBus (–ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ MESSAGE_GROUP)
- [ ] –ë–∞–∑–æ–≤—ã–π MessageBuffer –¥–ª—è –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 2: –ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è BatchProcessor —Å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Redis –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –±—É—Ñ–µ—Ä–æ–≤
- [ ] Recovery –±—É—Ñ–µ—Ä–æ–≤ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

### –≠—Ç–∞–ø 3: AI –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ AIProviderAdapter (Gemini)
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (—á—Ç–µ–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–∞)
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å —É—á–µ—Ç–æ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- [ ] –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞ AI –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ retry –ª–æ–≥–∏–∫–∞
- [ ] –†–∞–∑–ª–∏—á–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–¥ (—Ñ–ª–∞–≥ isAdmin)

### –≠—Ç–∞–ø 4: –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (DecisionOrchestrator)
- [ ] –†–∞–∑–Ω—ã–µ –≥—Ä–∞–¥–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –Ω–∞—Ä—É—à–µ–Ω–∏–π (—á–µ—Ä–µ–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ AI)
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è actions –¥–ª—è EventBus
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞–¥–∞—Ü–∏–∏ –Ω–∞–∫–∞–∑–∞–Ω–∏–π

### –≠—Ç–∞–ø 5: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ AI
- [ ] –£—á–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ (—Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
- [ ] –†–∞–∑–ª–∏—á–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–∏–∑–±–µ–∂–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤)
- [ ] –¢—Ä–∏–≥–≥–µ—Ä –æ—Ç–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
- [ ] –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
- [ ] –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã –æ—Ç–≤–µ—Ç–æ–≤

### –≠—Ç–∞–ø 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TelegramActionsAdapter
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ end-to-end —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞:** GroupAgentService –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å AIChatService –∏ AIModerationService
- **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–æ —á–∞—Ç–∞–º —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- **–§–ª–∞–≥ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏:** –î–æ–±–∞–≤–ª–µ–Ω–∏–µ `group_agent_enabled` –≤ `chat_configs` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UI (–±—É–¥—É—â–µ–µ)

- **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:** UI –Ω–∞ React (Telegram Web App) –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç GroupAgentService
- **–•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫:** UI —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ –ë–î (`chat_configs.group_agent_instructions`)
- **–ß—Ç–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫:** GroupAgentService —á–∏—Ç–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–∑ –ë–î/Redis
- **–°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å:** –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ UI –Ω–µ —Ç—Ä–µ–±—É—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å–µ—Ä–≤–∏—Å–µ –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç

### –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º

- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:** –ù–∞ —ç—Ç–∞–ø–µ –æ–±–∫–∞—Ç–∫–∏ –±–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å `kick` –∏ `ban`
- **–ü–µ—Ä–µ—Ö–≤–∞—Ç –¥–µ–π—Å—Ç–≤–∏–π:** –î–µ–π—Å—Ç–≤–∏—è `kick` –∏ `ban` –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ `mute`
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í—Å–µ –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å:
- –ù–æ–≤—ã–µ —Ç–∏–ø—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ AI-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–±—É–¥—É—â–µ–µ)

–î–ª—è production –≤–µ—Ä—Å–∏–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è:
- –ú–µ—Ç—Ä–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–∞—Ç—á–µ–π (—Ä–∞–∑–º–µ—Ä, –≤—Ä–µ–º—è, —É—Å–ø–µ—à–Ω–æ—Å—Ç—å)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–π (—Ç–∏–ø—ã –Ω–∞—Ä—É—à–µ–Ω–∏–π, —á–∞—Å—Ç–æ—Ç–∞)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API-–∫–≤–æ—Ç
- –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2024  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0.0-mvp  
**–°—Ç–∞—Ç—É—Å:** –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

