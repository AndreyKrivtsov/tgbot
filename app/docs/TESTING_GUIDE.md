# üß™ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Ç–µ—Å—Ç–æ–≤)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [–¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤](#—Ç–∏–ø—ã-—Ç–µ—Å—Ç–æ–≤)
- [–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤](#–∑–∞–ø—É—Å–∫-—Ç–µ—Å—Ç–æ–≤)
- [–ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤](#–Ω–∞–ø–∏—Å–∞–Ω–∏–µ-—Ç–µ—Å—Ç–æ–≤)
- [–ú–æ–∫–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã](#–º–æ–∫–∏-–∏-—É—Ç–∏–ª–∏—Ç—ã)
- [–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞](#–ø–æ–∫—Ä—ã—Ç–∏–µ-–∫–æ–¥–∞)
- [CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è](#cicd-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)

## üéØ –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Jest** –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π TypeScript. –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∫–ª—é—á–∞–µ—Ç unit-—Ç–µ—Å—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ integration-—Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏.

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:
- **Jest** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **ts-jest** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ TypeScript
- **@types/jest** - —Ç–∏–ø—ã –¥–ª—è Jest
- **Node.js Test Environment** - –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤

### –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- **DI-friendly testing** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Dependency Injection –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Mocking external dependencies** - –∏–∑–æ–ª—è—Ü–∏—è –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **Comprehensive coverage** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –ª–æ–≥–∏–∫–∏
- **Fast execution** - –±—ã—Å—Ç—Ä–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
app/src/__tests__/
‚îú‚îÄ‚îÄ setup.ts                        # –ì–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã
‚îú‚îÄ‚îÄ unit/                           # Unit-—Ç–µ—Å—Ç—ã –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ core/                       # –¢–µ—Å—Ç—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Container.test.ts       # DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ services/                   # –¢–µ—Å—Ç—ã –±–∏–∑–Ω–µ—Å-—Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ CaptchaService.test.ts  # –°–∏—Å—Ç–µ–º–∞ –∫–∞–ø—á–∏
‚îÇ       ‚îú‚îÄ‚îÄ AntiSpamService.test.ts # –ê–Ω—Ç–∏—Å–ø–∞–º —Å–µ—Ä–≤–∏—Å
‚îÇ       ‚îî‚îÄ‚îÄ AIChatService.test.ts   # –ò–ò —á–∞—Ç —Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ integration/                    # Integration-—Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ database.test.ts           # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ telegram-bot.test.ts       # –¢–µ—Å—Ç—ã Telegram –±–æ—Ç–∞
‚îî‚îÄ‚îÄ README.md                      # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
```

### –°–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—é:
- **Unit-—Ç–µ—Å—Ç—ã**: `ComponentName.test.ts`
- **Integration-—Ç–µ—Å—Ç—ã**: `feature-name.test.ts`
- **Mock —Ñ–∞–π–ª—ã**: `__mocks__/ModuleName.ts`
- **–£—Ç–∏–ª–∏—Ç—ã**: `test-utils/UtilityName.ts`

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Jest (`jest.config.js`):

```javascript
export default {
  preset: 'ts-jest',
  testEnvironment: 'node',
  setupFilesAfterEnv: ['<rootDir>/src/__tests__/setup.ts'],
  moduleNameMapping: {
    '^(\\.{1,2}/.*)\\.js$': '$1',
  },
  extensionsToTreatAsEsm: ['.ts'],
  transform: {
    '^.+\\.ts$': ['ts-jest', {
      useESM: true,
    }],
  },
  collectCoverageFrom: [
    'src/**/*.ts',
    '!src/**/*.d.ts',
    '!src/__tests__/**',
    '!src/**/index.ts',
  ],
  coverageDirectory: 'coverage',
  coverageReporters: ['text', 'lcov', 'html'],
}
```

### –ì–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (`setup.ts`):

```typescript
import { beforeEach, afterEach } from 'jest'

// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤
declare global {
  var testUtils: {
    mockTime: (timestamp: number) => void
    restoreTime: () => void
    createFakeUser: (id: number) => any
    createFakeChat: (id: number) => any
    createFakeMessage: (text: string) => any
    sleep: (ms: number) => Promise<void>
  }
}

// –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É—Ç–∏–ª–∏—Ç
global.testUtils = {
  mockTime: (timestamp: number) => {
    jest.useFakeTimers()
    jest.setSystemTime(new Date(timestamp))
  },
  
  restoreTime: () => {
    jest.useRealTimers()
  },
  
  createFakeUser: (id: number) => ({
    id,
    first_name: 'Test User',
    username: `testuser${id}`,
  }),
  
  // ... –¥—Ä—É–≥–∏–µ —É—Ç–∏–ª–∏—Ç—ã
}
```

## üß© –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

### 1. Unit-—Ç–µ—Å—Ç—ã

–¢–µ—Å—Ç–∏—Ä—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –∏–∑–æ–ª—è—Ü–∏–∏:

```typescript
// src/__tests__/unit/services/CaptchaService.test.ts
import { CaptchaService } from '../../../services/CaptchaService/index.js'

describe('CaptchaService', () => {
  let service: CaptchaService
  
  beforeEach(() => {
    const mockConfig = { /* mock config */ }
    const mockLogger = { /* mock logger */ }
    service = new CaptchaService(mockConfig, mockLogger)
  })
  
  test('–¥–æ–ª–∂–µ–Ω –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–¥–∞—á—É', () => {
    const challenge = service.generateChallenge()
    
    expect(challenge.question).toMatch(/\d+ [+\-*/] \d+ = \?/)
    expect(challenge.options).toHaveLength(4)
    expect(challenge.options).toContain(challenge.correctAnswer)
  })
})
```

### 2. Integration-—Ç–µ—Å—Ç—ã

–¢–µ—Å—Ç–∏—Ä—É—é—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏:

```typescript
// src/__tests__/integration/database.test.ts
import { Container } from '../../core/Container.js'
import { Application } from '../../core/Application.js'

describe('Database Integration', () => {
  let container: Container
  let app: Application
  
  beforeEach(async () => {
    container = new Container(mockLogger)
    app = new Application(container, mockLogger, testConfig)
    await app.initialize()
  })
  
  afterEach(async () => {
    await container.dispose()
  })
  
  test('–¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —á–∞—Ç–∞', async () => {
    const chatRepo = await container.getAsync('chatRepository')
    
    await chatRepo.saveChatConfig(123, { aiEnabled: true })
    const config = await chatRepo.getChatConfig(123)
    
    expect(config.aiEnabled).toBe(true)
  })
})
```

## üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
npm test

# –¢–µ—Å—Ç—ã –≤ —Ä–µ–∂–∏–º–µ watch (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
npm run test:watch

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
npm run test:coverage

# –¢–æ–ª—å–∫–æ unit-—Ç–µ—Å—Ç—ã
npm run test:unit

# –¢–æ–ª—å–∫–æ integration-—Ç–µ—Å—Ç—ã
npm run test:integration

# –î–ª—è CI/CD (–±–µ–∑ watch)
npm run test:ci
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤:

```bash
# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
npm test CaptchaService.test.ts

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É –Ω–∞–∑–≤–∞–Ω–∏—è
npm test -- --testNamePattern="Captcha"

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –ø–∞–ø–∫–µ
npm test src/__tests__/unit/services/

# –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
npm test -- --onlyChanged
```

### –†–µ–∂–∏–º—ã –æ—Ç–ª–∞–¥–∫–∏:

```bash
# –ó–∞–ø—É—Å–∫ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
npm test -- --verbose

# –û—Ç–ª–∞–¥–∫–∞ —á–µ—Ä–µ–∑ Node.js –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä
npm test -- --runInBand --inspect-brk

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–º–æ—â—å—é VS Code debugger
npm test -- --runInBand --no-coverage
```

## ‚úçÔ∏è –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∞ (AAA Pattern):

```typescript
describe('AntiSpamService', () => {
  test('–¥–æ–ª–∂–µ–Ω –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å–ø–∞–º —Å–æ–æ–±—â–µ–Ω–∏—è', async () => {
    // Arrange - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞
    const service = new AntiSpamService(mockConfig, mockLogger)
    const spamMessage = '–ö—É–ø–∏ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É! –°—Å—ã–ª–∫–∞: example.com'
    
    // Act - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
    const result = await service.checkMessage(123, spamMessage)
    
    // Assert - –ø—Ä–æ–≤–µ—Ä–∫–∞
    expect(result.isSpam).toBe(true)
    expect(result.confidence).toBeGreaterThan(0.5)
  })
})
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞:

```typescript
test('–¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–∞–π–º–∞—É—Ç—ã API', async () => {
  // –ú–æ–∫–∏—Ä—É–µ–º –º–µ–¥–ª–µ–Ω–Ω—ã–π API
  const slowApiMock = jest.fn().mockImplementation(
    () => new Promise(resolve => setTimeout(resolve, 10000))
  )
  
  service.setApiClient(slowApiMock)
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ç–∞–π–º–∞—É—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
  const result = await service.checkMessage(123, 'test')
  
  expect(result.error).toContain('timeout')
})
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫:

```typescript
test('–¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏', () => {
  expect(() => {
    new CaptchaService(invalidConfig, mockLogger)
  }).toThrow('Invalid configuration')
})

test('–¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ API', async () => {
  const failingApiMock = jest.fn().mockRejectedValue(
    new Error('API unavailable')
  )
  
  service.setApiClient(failingApiMock)
  
  await expect(service.checkMessage(123, 'test'))
    .rejects.toThrow('API unavailable')
})
```

## üé≠ –ú–æ–∫–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã

### 1. –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```typescript
// –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è
jest.mock('../../../config.js', () => ({
  config: {
    BOT_TOKEN: 'test-token',
    DATABASE_URL: 'test-db-url',
    ANTISPAM_URL: 'http://test-antispam-api',
  }
}))

// –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞
jest.mock('../../../services/RedisService/index.js', () => ({
  RedisService: jest.fn().mockImplementation(() => ({
    get: jest.fn(),
    set: jest.fn(),
    del: jest.fn(),
  }))
}))
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ test doubles:

```typescript
// Stub - –ø—Ä–æ—Å—Ç–∞—è –∑–∞–≥–ª—É—à–∫–∞
const loggerStub = {
  i: jest.fn(),
  w: jest.fn(),
  e: jest.fn(),
  d: jest.fn(),
}

// Mock - –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–∞—è –∑–∞–≥–ª—É—à–∫–∞
const apiClientMock = {
  post: jest.fn().mockResolvedValue({ 
    ok: true, 
    json: () => Promise.resolve({ is_spam: false })
  })
}

// Spy - —Å–ª–µ–∂–µ–Ω–∏–µ –∑–∞ –≤—ã–∑–æ–≤–∞–º–∏
const originalMethod = service.processMessage
const processMessageSpy = jest.spyOn(service, 'processMessage')
```

### 3. –†–∞–±–æ—Ç–∞ —Å –≤—Ä–µ–º–µ–Ω–µ–º:

```typescript
beforeEach(() => {
  jest.useFakeTimers()
  jest.setSystemTime(new Date('2024-01-01'))
})

afterEach(() => {
  jest.useRealTimers()
})

test('–¥–æ–ª–∂–µ–Ω —É–¥–∞–ª—è—Ç—å –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∫–∞–ø—á–∏', () => {
  service.createCaptcha(123)
  
  // –ü—Ä–æ–¥–≤–∏–≥–∞–µ–º –≤—Ä–µ–º—è –Ω–∞ 2 –º–∏–Ω—É—Ç—ã
  jest.advanceTimersByTime(120000)
  
  service.cleanupExpiredCaptchas()
  
  expect(service.getCaptcha(123)).toBeNull()
})
```

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è:

```javascript
// jest.config.js
module.exports = {
  collectCoverageFrom: [
    'src/**/*.ts',
    '!src/**/*.d.ts',
    '!src/__tests__/**',
    '!src/index.ts',
    '!src/**/__mocks__/**',
  ],
  coverageThreshold: {
    global: {
      branches: 80,
      functions: 80,
      lines: 80,
      statements: 80,
    },
    './src/core/': {
      branches: 90,
      functions: 90,
      lines: 90,
      statements: 90,
    },
  },
}
```

### –ê–Ω–∞–ª–∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è:

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
npm run test:coverage

# –ü—Ä–æ—Å–º–æ—Ç—Ä HTML –æ—Ç—á–µ—Ç–∞
open coverage/lcov-report/index.html

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä–æ–≥–æ–≤ –ø–æ–∫—Ä—ã—Ç–∏—è
npm run test:ci
```

### –¢–∏–ø—ã –º–µ—Ç—Ä–∏–∫ –ø–æ–∫—Ä—ã—Ç–∏—è:
- **Lines**: –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫
- **Functions**: –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–∑–≤–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π  
- **Branches**: –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö –≤–µ—Ç–æ–∫ —É—Å–ª–æ–≤–∏–π
- **Statements**: –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π

## üîÑ CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### GitHub Actions workflow:

```yaml
# .github/workflows/test.yml
name: Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
    
    - name: Install dependencies
      run: npm ci
    
    - name: Run tests
      run: npm run test:ci
    
    - name: Upload coverage
      uses: codecov/codecov-action@v3
      with:
        file: ./coverage/lcov.info
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º:

```bash
# package.json scripts
{
  "scripts": {
    "precommit": "npm run lint && npm run test:ci",
    "prepush": "npm run test:coverage"
  }
}
```

## üõ†Ô∏è –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤:
- –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤ `describe` –±–ª–æ–∫–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤
- –°–ª–µ–¥—É–π—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø—É AAA (Arrange, Act, Assert)

### 2. –ò–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤:
- –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `beforeEach`/`afterEach` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏/–æ—á–∏—Å—Ç–∫–∏
- –ú–æ–∫–∏—Ä—É–π—Ç–µ –≤—Å–µ –≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### 3. –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å:
- –ü–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã –∫–∞–∫ –∂–∏–≤—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- –î–æ–±–∞–≤–ª—è–π—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏

### 4. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- –ò–∑–±–µ–≥–∞–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã—Ö HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ in-memory –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –æ—Ç–¥–µ–ª—å–Ω–æ

---

> üí° **–°–ª–µ–¥—É—é—â–∏–µ —Ä–∞–∑–¥–µ–ª—ã**: [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î](./DATABASE_SETUP.md) | [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](./ARCHITECTURE_OVERVIEW.md)
