# ü§ñ Gemini API –ê–¥–∞–ø—Ç–µ—Ä

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ—Å—Ç–æ–π –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Google Gemini API. –í—ã–ø–æ–ª–Ω—è–µ—Ç HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ API –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã.

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```typescript
import { GeminiAdapter } from './services/ai/providers/GeminiAdapter.js'

// –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–∞–ø—Ç–µ—Ä–∞
const adapter = new GeminiAdapter()

// –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å (API –∫–ª—é—á –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–∑–æ–≤–µ)
const response = await adapter.generateContent('your-api-key', '–û–±—ä—è—Å–Ω–∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ò–ò')
console.log(response)

// –ó–∞–ø—Ä–æ—Å —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º
const systemPrompt = '–¢—ã –ø–æ–º–æ—â–Ω–∏–∫ –≤ –≥—Ä—É–ø–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤. –û—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ.'
const response2 = await adapter.generateContent('your-api-key', '–ß—Ç–æ —Ç–∞–∫–æ–µ Git?', undefined, systemPrompt)
console.log(response2)

// –ó–∞–ø—Ä–æ—Å —Å –∏—Å—Ç–æ—Ä–∏–µ–π —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
const conversationHistory = [
  {
    role: 'user',
    parts: [{ text: '–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?' }]
  },
  {
    role: 'model',
    parts: [{ text: '–ü—Ä–∏–≤–µ—Ç! –£ –º–µ–Ω—è –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ!' }]
  }
]
const response3 = await adapter.generateContent('your-api-key', '–ú–æ–∂–µ—à—å –ø–æ–º–æ—á—å —Å –∫–æ–¥–æ–º?', conversationHistory)
console.log(response3)

// –ó–∞–ø—Ä–æ—Å —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
const customConfig = {
  temperature: 0.5,
  maxOutputTokens: 200,
  topP: 0.9
}
const response4 = await adapter.generateContent('your-api-key', '–†–∞—Å—Å–∫–∞–∂–∏ –∞–Ω–µ–∫–¥–æ—Ç', undefined, undefined, customConfig)
console.log(response4)
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AIChatService:

```typescript
// –í AIChatService –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–¥–∞–ø—Ç–µ—Ä
const chatId = 123456789
const apiKey = await this.getApiKeyForChat(chatId) // –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫–ª—é—á
const systemPrompt = await this.getSystemPromptForChat(chatId)

// –ü–æ–ª—É—á–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
const context = this.getOrCreateContext(chatId.toString())
const conversationHistory = context.messages.map(msg => ({
  role: msg.role === 'assistant' ? 'model' : 'user',
  parts: [{ text: msg.content }]
}))

const geminiAdapter = new GeminiAdapter()
const response = await geminiAdapter.generateContent(apiKey, message, conversationHistory, systemPrompt)
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

–ê–¥–∞–ø—Ç–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –æ—Ç–≤–µ—Ç–æ–≤:

### GenerationConfig

```typescript
interface GenerationConfig {
  temperature: number        // –¢–≤–æ—Ä—á–µ—Å–∫–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ (0.0-2.0, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1.0)
  maxOutputTokens: number   // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 800)
  topP: number             // Nucleus sampling (0.0-1.0, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 0.8)
  topK: number             // Top-K sampling (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10)
  stopSequences: string[]  // –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: ["Title"])
}
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

```typescript
const defaultConfig = {
  temperature: 1.0,        // –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–≤–æ—Ä—á–µ—Å–∫–æ—Å—Ç—å
  maxOutputTokens: 800,    // –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
  topP: 0.8,              // –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –≤ –æ—Ç–≤–µ—Ç–∞—Ö
  topK: 10,               // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ —Å–ª–æ–≤
  stopSequences: ["Title"] // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö
}
```

## üîß API

### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
```typescript
new GeminiAdapter()
```
–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∞–¥–∞–ø—Ç–µ—Ä–∞. API –∫–ª—é—á –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ `generateContent()`.

### –ú–µ—Ç–æ–¥—ã

#### `generateContent(apiKey: string, prompt: string, conversationHistory?: GeminiMessage[], systemPrompt?: string, customConfig?: GenerationConfig): Promise<string>`
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ Gemini API –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `apiKey` - API –∫–ª—é—á –¥–ª—è Google Gemini (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞—Ç–∞)
- `prompt` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞
- `conversationHistory` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ Gemini
- `systemPrompt` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ò–ò
- `customConfig` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** Promise —Å —Ç–µ–∫—Å—Ç–æ–º –æ—Ç–≤–µ—Ç–∞ –æ—Ç –ò–ò

#### `testConnection(apiKey: string): Promise<boolean>`
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å API, –æ—Ç–ø—Ä–∞–≤–ª—è—è —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `apiKey` - API –∫–ª—é—á –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** Promise —Å –±—É–ª–µ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º (true = —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

#### `setModel(modelName: string): void`
–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `modelName` - –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 'gemini-2.0-flash')

#### `updateDefaultConfig(config: Partial<GenerationConfig>): void`
–û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `config` - —á–∞—Å—Ç–∏—á–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

#### `getDefaultConfig(): GenerationConfig`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

#### `getModelInfo(): { model: string; baseUrl: string; config: GenerationConfig }`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–π –º–æ–¥–µ–ª–∏, –±–∞–∑–æ–≤–æ–º URL –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

## üì° –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞

–ê–¥–∞–ø—Ç–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º Gemini API:

```json
{
  "contents": [
    {
      "role": "user",
      "parts": [
        {
          "text": "System prompt (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)"
        }
      ]
    },
    {
      "role": "user",
      "parts": [
        {
          "text": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?"
        }
      ]
    },
    {
      "role": "model",
      "parts": [
        {
          "text": "–ü—Ä–∏–≤–µ—Ç! –£ –º–µ–Ω—è –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ!"
        }
      ]
    },
    {
      "role": "user",
      "parts": [
        {
          "text": "–ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
        }
      ]
    }
  ],
  "generationConfig": {
    "stopSequences": ["Title"],
    "temperature": 1.0,
    "maxOutputTokens": 800,
    "topP": 0.8,
    "topK": 10
  }
}
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏

–ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- **role**: `"user"` –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, `"model"` –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –ò–ò
- **parts**: –º–∞—Å—Å–∏–≤ —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è

–ü–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω:
1. –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, role: "user")
2. –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
3. –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (role: "user")

## üõ†Ô∏è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–¥–∞–ø—Ç–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:

```bash
node test-gemini-adapter.js YOUR_API_KEY
```

–°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç —à–µ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤:
1. –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å –±–µ–∑ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
2. –ó–∞–ø—Ä–æ—Å —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º
3. –ó–∞–ø—Ä–æ—Å —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
4. –ó–∞–ø—Ä–æ—Å —Å –∏—Å—Ç–æ—Ä–∏–µ–π —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ (–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
6. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–æ–¥–µ–ª–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ê–¥–∞–ø—Ç–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫:

- **HTTP –æ—à–∏–±–∫–∏** (4xx, 5xx) - –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Å –∫–æ–¥–æ–º —Å—Ç–∞—Ç—É—Å–∞
- **API –æ—à–∏–±–∫–∏** - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–ª–µ `error` –≤ –æ—Ç–≤–µ—Ç–µ –æ—Ç Gemini
- **–ü—É—Å—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤–∞–ª–∏–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ –æ—Ç–≤–µ—Ç–µ
- **–°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏** - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ fetch

–í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –∏ –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –¥–∞–ª—å—à–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ –≤—ã–∑—ã–≤–∞—é—â–µ–º –∫–æ–¥–µ.

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —á–∞—Ç–∞–º–∏

–í —Å–∏—Å—Ç–µ–º–µ –∫–∞–∂–¥—ã–π —á–∞—Ç –º–æ–∂–µ—Ç –∏–º–µ—Ç—å:
- **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π API –∫–ª—é—á** - —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `chats.gemini_api_key`
- **–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç** - —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `chats.system_prompt`
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–∏–º–∏—Ç–æ–≤** - `daily_limit`, `throttle_delay`

–ï—Å–ª–∏ —É —á–∞—Ç–∞ –Ω–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –∫–ª—é—á–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **Throttling**: –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞—Ç–∞
- **Retry –ª–æ–≥–∏–∫–∞**: –¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–æ–≤ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç**: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω 600 —Å–∏–º–≤–æ–ª–∞–º–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- API –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –õ–æ–≥–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–ª–Ω—ã—Ö API –∫–ª—é—á–µ–π (–º–∞—Å–∫–∏—Ä—É—é—Ç—Å—è)
- –õ–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞—â–∏—â–∞—é—Ç –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö 

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

```typescript
interface GeminiMessage {
  role: 'user' | 'model'  // 'user' –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, 'model' –¥–ª—è –ò–ò
  parts: Array<{
    text: string
  }>
}
``` 