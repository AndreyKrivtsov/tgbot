# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/src/web/
‚îú‚îÄ‚îÄ static/           # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (–±—É–¥—É—â–∏–π –±–∏–ª–¥ React)
‚îú‚îÄ‚îÄ frontend/         # –ò—Å—Ö–æ–¥–Ω–∏–∫–∏ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  
‚îú‚îÄ‚îÄ SETUP.md         # –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
‚îî‚îÄ‚îÄ README.md        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
```

## üöÄ –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

‚úÖ **–ì–æ—Ç–æ–≤–æ:**
- WebServerService —Å–æ–∑–¥–∞–Ω –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ —Å–æ–∑–¥–∞–Ω–∞
- Graceful fallback –±–µ–∑ Fastify

‚ùå **–¢—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
- Node.js v18+ –∏–ª–∏ v20+
- Fastify –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

## üõ†Ô∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Node.js

**–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è:** 14.17.6 (—É—Å—Ç–∞—Ä–µ–ª–∞)
**–¢—Ä–µ–±—É–µ—Ç—Å—è:** Node.js v18+ –∏–ª–∏ v20+

–°–∫–∞—á–∞–π—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é: https://nodejs.org/

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Node.js:

```bash
cd app
npm install fastify @fastify/cors @fastify/static
```

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ package.json

```json
{
  "dependencies": {
    "fastify": "^5.2.0",
    "@fastify/cors": "^10.0.1", 
    "@fastify/static": "^8.0.2"
  }
}
```

### 4. –ó–∞–ø—É—Å–∫

```bash
npm run dev
```

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω:
- **–õ–æ–∫–∞–ª—å–Ω–æ**: http://localhost:3000/admin
- **–í —Å–µ—Ç–∏**: http://0.0.0.0:3000/admin

## üì± Telegram WebApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞  
3. –ö–æ–º–∞–Ω–¥–∞ `/setmenubutton`
4. –¢–µ–∫—Å—Ç: "–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å"
5. URL: `https://yourdomain.com/admin`

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è —Ç—É–Ω–Ω–µ–ª—è:

```bash
# –ì–ª–æ–±–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
npm install -g ngrok

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç—É–Ω–Ω–µ–ª—è  
ngrok http 3000

# –ü—Ä–∏–º–µ—Ä URL: https://abc123.ngrok.io/admin
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í —Ñ–∞–π–ª–µ `.env`:

```env
# –í–µ–±-—Å–µ—Ä–≤–µ—Ä
WEB_PORT=3000
WEB_HOST=0.0.0.0

# Telegram
ADMIN_USERNAME=your_telegram_username
```

## üé® React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ë—É–¥—É—â–µ–µ)

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–π —Å—Ç–µ–∫:

- **React 18** + TypeScript
- **Vite** –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Å–±–æ—Ä–∫–∏
- **TailwindCSS** –¥–ª—è —Å—Ç–∏–ª–µ–π
- **React Query** –¥–ª—è API
- **Zustand** –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```bash
cd app/src/web/frontend
npm create vite@latest . -- --template react-ts

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
npm install @tanstack/react-query zustand react-hook-form
npm install -D tailwindcss postcss autoprefixer

# Telegram WebApp SDK
npm install @twa-dev/sdk
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```
frontend/src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ Dashboard/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Stats.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Overview.tsx
‚îÇ   ‚îú‚îÄ‚îÄ Settings/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CaptchaSettings.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AntiSpamSettings.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AISettings.tsx
‚îÇ   ‚îî‚îÄ‚îÄ UI/
‚îÇ       ‚îú‚îÄ‚îÄ Toggle.tsx
‚îÇ       ‚îú‚îÄ‚îÄ Input.tsx
‚îÇ       ‚îî‚îÄ‚îÄ Button.tsx
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useConfig.ts
‚îÇ   ‚îú‚îÄ‚îÄ useStats.ts
‚îÇ   ‚îî‚îÄ‚îÄ useTelegram.ts
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ api.ts
‚îÇ   ‚îî‚îÄ‚îÄ telegram.ts
‚îî‚îÄ‚îÄ types/
    ‚îú‚îÄ‚îÄ config.ts
    ‚îî‚îÄ‚îÄ stats.ts
```

## üîß API Endpoints

WebServerService –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

- `GET /api/health` - –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
- `GET /api/config` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞
- `POST /api/config` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏  
- `GET /api/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```typescript
// –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
const response = await fetch('/api/config')
const { config } = await response.json()

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
await fetch('/api/config', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    captchaEnabled: true,
    aiDailyLimit: 2000
  })
})
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Telegram WebApp –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
function validateTelegramUser(initData: string) {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ Telegram
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–∏  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
}
```

### CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –≤—Å–µ origins. –î–ª—è production:

```typescript
await fastify.register(corsModule.default, {
  origin: ['https://yourdomain.com'],
  methods: ['GET', 'POST'],
  credentials: true
})
```

## üìä –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –¢–µ–∫—É—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–ø—á–∏ (–≤–∫–ª—é—á–µ–Ω–∏–µ, —Ç–∞–π–º–∞—É—Ç)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–Ω—Ç–∏—Å–ø–∞–º–∞ (–ø–æ—Ä–æ–≥ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AI —á–∞—Ç–∞ (–ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ API

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- [ ] –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–î
- [ ] Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- [ ] –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- [ ] –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] Backup –∏ restore –Ω–∞—Å—Ç—Ä–æ–µ–∫
- [ ] –¢–µ–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞
- [ ] –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
npm run build

# –ó–∞–ø—É—Å–∫ –≤ dev —Ä–µ–∂–∏–º–µ
npm run dev

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
tail -f logs/app.log
```

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **Node.js —É—Å—Ç–∞—Ä–µ–ª** ‚Üí –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ v18+
2. **Fastify –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω** ‚Üí `npm install fastify`
3. **–ü–æ—Ä—Ç –∑–∞–Ω—è—Ç** ‚Üí –ò–∑–º–µ–Ω–∏—Ç–µ `WEB_PORT` –≤ .env
4. **CORS –æ—à–∏–±–∫–∏** ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ origin –¥–æ–º–µ–Ω–∞
5. **Telegram WebApp –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** ‚Üí –ù—É–∂–µ–Ω HTTPS

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

- Lazy loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ú–µ–º–æ–∏–∑–∞—Ü–∏—è API –∑–∞–ø—Ä–æ—Å–æ–≤
- –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- Service Worker –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- Compression middleware

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

```typescript
// Health check —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
const health = {
  status: "ok",
  uptime: process.uptime(),
  memory: process.memoryUsage(),
  services: {
    webServer: true,
    database: true,
    telegramBot: true
  }
}
```

## üöÄ –î–µ–ø–ª–æ–π

### Development:

```bash
npm run dev
```

### Production:

```bash
npm run build
npm start
```

### Docker:

```dockerfile
FROM node:18-alpine
COPY . /app
WORKDIR /app
RUN npm ci --only=production
EXPOSE 3000
CMD ["npm", "start"]
```

---

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** ‚ö° –ì–æ—Ç–æ–≤ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Node.js –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Fastify 